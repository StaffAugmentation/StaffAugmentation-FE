<form class="br" [formGroup]="addEditForm" (ngSubmit)="onSubmit()">
  <p-tabView>

    <p-tabPanel header="General information" class="p-fluid m-0">
      <div class="p-fluid p-2 mb-4">
        <div class="field">
          <label for="requestNumber"> <b>Request number</b><span class="text-red-500">*</span></label>
          <input type="text" pInputText formControlName="requestNumber"
            [class]="addEditForm.get('requestNumber')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''">
          <p-message *ngIf="addEditForm.get('requestNumber')?.invalid && isSubmited" severity="error"
            [text]="getErrorMessage('requestNumber', addEditForm.get('requestNumber')?.errors)"></p-message>
        </div>
        <div class="formgrid grid">
          <div class="field col">
            <label for="frameworkContract"> <b>Framework Contract</b><span class="text-red-500">*</span></label>
            <p-dropdown [options]="frameworkContract" formControlName="frameworkContract"
              [class]="addEditForm.get('frameworkContract')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''">
            </p-dropdown>
            <p-message *ngIf="addEditForm.get('frameworkContract')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('frameworkContract', addEditForm.get('frameworkContract')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="cascade"><b>Cascade</b></label>
            <p-dropdown [options]="cascade" formControlName="cascade">
            </p-dropdown>
          </div>
          <div class="field col">
            <label for="department"><b>Department</b><span class="text-red-500">*</span></label>
            <div class="flex">
              <p-autoComplete [dropdown]="true" [readonly]="false" [suggestions]="filteredDepartments"
                formControlName="department" (completeMethod)="filterDepartment($event)"
                [class]="addEditForm.get('department')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''">
              </p-autoComplete>
              <button type="button" (click)="addDepartment()" pButton pRipple class="p-button-outlined"
                icon="pi pi-plus"></button>
            </div>
            <p-message *ngIf="addEditForm.get('department')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('department', addEditForm.get('department')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="departmentEmail"><b>Department Email</b></label>
            <input type="email7" pInputText formControlName="departmentEmail">
          </div>
        </div>
        <div class="formgrid grid">
          <div class="field col">
            <label for="contactName"> <b>Contact Name</b></label>
            <input type="text" pInputText formControlName="contactName">
          </div>
          <div class="field col">
            <label for="technicalContact"><b>Technical Contact</b></label>
            <input type="text" pInputText formControlName="technicalContact">
          </div>
          <div class="field col">
            <label for="openIntended"><b>Open/Intended</b></label>
            <p-dropdown [options]="openIntended" formControlName="openIntended"></p-dropdown>
          </div>
          <div class="field col">
            <label for="comment"><b>Comment</b></label>
            <input type="text" pInputText formControlName="comment">
          </div>
        </div>
        <div class="formgrid grid">
          <div class="field col">
            <label for="status"> <b>Status</b><span class="text-red-500">*</span></label>
            <p-dropdown [options]="status" formControlName="status"
              [class]="addEditForm.get('status')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''"></p-dropdown>
            <p-message *ngIf="addEditForm.get('status')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('status', addEditForm.get('status')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="serviceType"> <b>Service Type</b><span class="text-red-500">*</span></label>
            <p-dropdown [options]="serviceType" formControlName="serviceType"
              [class]="addEditForm.get('serviceType')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''"></p-dropdown>
            <p-message *ngIf="addEditForm.get('serviceType')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('serviceType', addEditForm.get('serviceType')?.errors)"></p-message>
          </div>
        </div>
        <div class="field">
          <label for="source"> <b>Source</b><span class="text-red-500">*</span></label>
          <p-dropdown [options]="source" formControlName="source"
            [class]="addEditForm.get('source')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''"></p-dropdown>
          <p-message *ngIf="addEditForm.get('source')?.invalid && isSubmited" severity="error"
            [text]="getErrorMessage('source', addEditForm.get('source')?.errors)"></p-message>
        </div>
      </div>
    </p-tabPanel>

    <p-tabPanel header="Work order" class="p-fluid m-0">
      <div class="p-fluid p-2 mb-4">
        <div class="formgrid grid">
          <div class="field col">
            <label for="dateRf"> <b>Date RF received</b><span class="text-red-500">*</span></label>
            <p-calendar formControlName="dateRf" [disabledDays]="[5,6]" [showIcon]="true" [readonlyInput]="true"
              [class]="addEditForm.get('dateRf')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''">
            </p-calendar>
            <p-message *ngIf="addEditForm.get('dateRf')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('dateRf', addEditForm.get('dateRf')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="acknowlegment"><b>Acknowlegment</b></label>
            <p-calendar formControlName="acknowlegment" [disabledDays]="[5,6]" [showIcon]="true"
              [readonlyInput]="true"></p-calendar>
          </div>
          <div class="field col">
            <label for="acknowlegmentDl"><b>Acknowlegment deadline</b><span class="text-red-500">*</span></label>
            <p-calendar formControlName="acknowlegmentDl" [disabledDays]="[5,6]" [showIcon]="true"
              [readonlyInput]="true"></p-calendar>
          </div>
        </div>
        <div class="formgrid grid">
          <div class="field col">
            <label for="yesNoDeadline"><b>Yes/No (Deadline)</b></label>
            <p-calendar formControlName="yesNoDeadline" [disabledDays]="[5,6]" [showIcon]="true" [readonlyInput]="true"
              [class]="addEditForm.get('yesNoDeadline')?.invalid && isSubmited ? 'ng-dirty ng-invalid' : ''">
            </p-calendar>
            <p-message *ngIf="addEditForm.get('yesNoDeadline')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('yesNoDeadline', addEditForm.get('yesNoDeadline')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="proposalDeadline"><b>Proposal (Deadline)</b></label>
            <p-calendar formControlName="proposalDeadline" [disabledDays]="[5,6]" [showIcon]="true"
              [readonlyInput]="true"></p-calendar>
            <p-message *ngIf="addEditForm.get('proposalDeadline')?.invalid && isSubmited" severity="error"
              [text]="getErrorMessage('proposalDeadline', addEditForm.get('proposalDeadline')?.errors)"></p-message>
          </div>
          <div class="field col">
            <label for="expectedSD"><b>Expected start date</b></label>
            <p-calendar formControlName="expectedSD" [disabledDays]="[5,6]" [showIcon]="true"
              [readonlyInput]="true"></p-calendar>
          </div>
        </div>
        <p-table #dtProfile [value]="listProfile" selectionMode="single" dataKey="id" [rows]="250"
          [loading]="tableOptions.loading" [rowHover]="true" styleClass="p-datatable-gridlines"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [showCurrentPageReport]="true"
          scrollDirection="both" [scrollable]="true" scrollHeight="400px" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 115px;">
              </th>
              <th *ngFor="let col of tableOptions.visibleCols" style="min-width: 100px;">
                <div class="flex justify-content-between align-items-center">
                  {{col.label}}
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-Profile>
            <tr>
              <td class="p-0 text-center">
                <button (click)="editProfile(Profile.profileN)" pButton pRipple type="button" icon="pi pi-pencil"
                  class="p-button-rounded p-button-info p-button-text"></button>
              </td>
              <td *ngFor="let col of tableOptions.visibleCols">
                {{Profile[col.id]}}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="8">No Profile found.</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="loadingbody">
            <tr>
              <td colspan="8">Loading Profiles data. Please wait.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-tabPanel>

    <p-tabPanel header="Basic characteristics" class="p-fluid m-0">

    </p-tabPanel>

    <p-tabPanel header="Offer information" class="p-fluid m-0">

    </p-tabPanel>
    <p-tabPanel header="Specific contract" class="p-fluid m-0">

    </p-tabPanel>

    <p-tabPanel header="Specific contract" class="p-fluid m-0">

    </p-tabPanel>

  </p-tabView>
  <div class="footer-filled">
    <button pButton pRipple class="p-button-outlined bg-white">Communicate to partners <i class="ml-2 pi pi-envelope"></i></button>
    <div>
      <button type="submit" pButton pRipple class="p-button-sm p-button-primary mr-2" label="Save"
        [loading]="actionLoading"></button>
      <button (click)="close()" type="button" pButton pRipple class="p-button-outlined p-button-sm p-button-secondary"
        label="Close"></button>
    </div>
  </div>
</form>